<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Dashboard</title>
    <meta name="theme-color" content="#132238" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Dashboard" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon.png" />
    <link rel="shortcut icon" href="assets/favicon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/app-icon-ios-180.png" />
    <link rel="stylesheet" href="styles.css" />
    <script src="firebase-config.js"></script>
  </head>
  <body>
    <div class="background-shape bg-shape-one"></div>
    <div class="background-shape bg-shape-two"></div>

    <header class="top-bar">
      <div class="top-bar-main">
        <button
          id="mobileMenuBtn"
          class="mobile-menu-btn"
          type="button"
          aria-label="Toggle navigation menu"
          aria-controls="tabsNav"
          aria-expanded="false"
        >
          <span class="mobile-menu-icon" aria-hidden="true"></span>
        </button>
        <h1 class="brand-title">Dashboard</h1>
      </div>

      <div class="auth-controls">
        <button
          id="accountMenuBtn"
          class="account-menu-btn"
          type="button"
          aria-label="Account menu"
          aria-controls="accountMenuPanel"
          aria-expanded="false"
          hidden
        >
          <span class="account-menu-icon" aria-hidden="true"></span>
        </button>
        <div id="accountMenuPanel" class="account-menu-panel" aria-hidden="true" hidden>
          <span id="userLabel" class="user-label"></span>
          <span id="syncStatus" class="sync-status"></span>
          <button id="logoutBtn" class="btn btn-ghost" hidden>Logout</button>
        </div>
      </div>
    </header>

    <main class="app-shell">
      <section id="authMessage" class="panel auth-panel">
        <p id="authStatusText">Checking Firebase authentication...</p>
        <form id="authForm" class="auth-form" hidden>
          <label class="field">
            <span>Email</span>
            <input id="authEmailInput" type="email" autocomplete="email" required />
          </label>
          <label class="field">
            <span>Password</span>
            <input
              id="authPasswordInput"
              type="password"
              autocomplete="current-password"
              minlength="6"
              required
            />
          </label>
          <div class="auth-actions">
            <button id="authLoginBtn" class="btn btn-primary" type="submit">Login</button>
          </div>
        </form>
      </section>

      <section id="app" hidden>
        <nav id="tabsNav" class="tabs">
          <button class="tab-btn active" data-tab="tasks">Tasks</button>
          <button class="tab-btn" data-tab="lists">Lists</button>
        </nav>

        <section id="tasksTab" class="panel tab-content">
          <div class="section-head">
            <h2>Tasks</h2>
          </div>

          <form id="taskCreateForm" class="create-form">
            <label class="field">
              <span>Task title</span>
              <input id="taskTitleInput" type="text" placeholder="e.g. Send weekly report" required />
            </label>
            <label class="field">
              <span>Initial note (optional)</span>
              <textarea
                class="auto-grow"
                id="taskNoteInput"
                rows="2"
                placeholder="Add context for this task..."
              ></textarea>
            </label>
            <button type="submit" class="btn btn-primary">Add Task</button>
          </form>

          <div class="toolbar">
            <label class="field compact">
              <span>Filter by status</span>
              <select id="taskFilterSelect">
                <option value="all">All</option>
                <option value="todo">To do</option>
                <option value="in_progress">In progress</option>
                <option value="unresolved">Unresolved</option>
                <option value="resolved">Resolved</option>
              </select>
            </label>

            <label class="field compact">
              <span>Sort</span>
              <select id="taskSortSelect">
                <option value="newest">Newest first</option>
                <option value="oldest">Oldest first</option>
                <option value="title">Title (A-Z)</option>
                <option value="status">Status</option>
              </select>
            </label>
          </div>

          <div id="taskList" class="list-grid"></div>
        </section>

        <section id="listsTab" class="panel tab-content" hidden>
          <div class="section-head">
            <h2>Lists</h2>
          </div>

          <form id="listCreateForm" class="create-form list-create-form">
            <label class="field">
              <span>List name</span>
              <input id="listNameInput" type="text" placeholder="e.g. Grocery list" required />
            </label>
            <button type="submit" class="btn btn-primary">Create List</button>
          </form>

          <div class="toolbar">
            <label class="field compact">
              <span>Item filter</span>
              <select id="itemFilterSelect">
                <option value="all">All items</option>
                <option value="checked">Checked only</option>
                <option value="unchecked">Unchecked only</option>
              </select>
            </label>
          </div>

          <div id="listsContainer" class="list-grid"></div>
        </section>
      </section>
    </main>

    <script type="module" src="app.js"></script>
  </body>
</html>
